{"mappings":"iiBACA,IAAAA,EAAAC,EAAA,S,0BAGAC,E,YAAMC,SAASC,QACb,iEAEF,I,EAAMC,EAAO,CACXC,KAAMC,SAASC,cAAc,SAC7BC,KAAMF,SAASC,cAAc,SAC7BE,OAAQH,SAASC,cAAc,WAC/BG,MAAOJ,SAASC,cAAc,UAC9BI,SAAUL,SAASC,cAAc,eAM/BK,GAAY,EACZC,EAAQ,GACRC,EAAQ,GACRC,EANyB,EAuBvBC,G,EAAYf,EAAAF,EAAA,CAAAE,EAAAgB,GAAAC,MAAA,SAAAC,I,IAKRC,EAGAC,E,yEAPRT,GAAY,EALSR,EAAKK,OAAOa,UAAUC,IAAI,W,kBAStBC,MACrB,oEAAsFC,OAAlBX,EAAM,cAAkCW,OA5B5F,EA4BoF,UAAoBA,OAAZV,I,cADxGK,EAAQM,EAAAC,K,SAGKP,EAASQ,O,OAAtBP,EAAIK,EAAAC,KACVd,EAASZ,EAAA4B,EAAD,CAAIhB,GAAAY,OAAJ,CAAWJ,EAAKS,OACxBC,WAAaV,EAAKW,UAhCA,EAOHC,EA0BJZ,EAAKS,KAzBZtB,WAAOyB,EACVC,KACC,SAAAC,G,IAAGC,EAAUD,EAAVC,WAAYC,EAAOF,EAAPE,Q,MACb,gBAAsCZ,OAAtBY,EAAQ,gBAAyBZ,OAAXW,EAAW,gB,IAEpDE,KAAK,IAERlC,EAAKI,KAAK+B,mBAAmB,YAAa/B,G,kDAoBxCgC,QAAQC,IAAIf,EAAAgB,GAAMC,S,QAfEvC,EAAKK,OAAOa,UAAUsB,OAAO,WAmBnDhC,GAAY,E,kCAhCK,IAAAqB,EACXzB,C,oEA+DRJ,EAAKC,KAAKwC,iBAAiB,UA7BN,SAAAC,GACnBA,EAAEC,iBAEEjC,IAAUgC,EAAEE,OAAOC,SAASC,MAAMC,QAEtCrC,EAAQgC,EAAEE,OAAOC,SAASC,MAAMC,MAChC/C,EAAKI,KAAK4C,UAAY,GACtBrC,EAlD2B,EAmD3BF,EAAQ,GAEHC,GAELE,I,IAkBFZ,EAAKI,KAAKqC,iBAAiB,UAVA,SAAAV,G,IAAGa,EAAMb,EAANa,OAE1BA,EAAOK,UAAYL,EAAOM,aAAe,IAAMN,EAAOO,eACrD3C,IAPHG,GAAe,EACfC,I","sources":["src/mod-11-vebinar-1.js"],"sourcesContent":["// &q=butterfly&image_type=photo&per_page=5\nimport './css/style.css';\nimport axios from 'axios';\n\naxios.defaults.baseURL =\n  'https://pixabay.com/api?key=29685313-2ba6443e06a4499ef383b21bf';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  list: document.querySelector('.list'),\n  loader: document.querySelector('.loader'),\n  pages: document.querySelector('.pages'),\n  loadMore: document.querySelector('.load-more'),\n};\n\nconst DEFAULT_CURRENT_PAGE = 1;\nconst HITS_PER_PAGE = 5;\n\nlet isLoading = false;\nlet items = [];\nlet query = '';\nlet currentPage = DEFAULT_CURRENT_PAGE;\n\nconst renderList = items => {\n  const list = items\n    .map(\n      ({ previewURL, pageURL }) =>\n        `<li><a href=\"${pageURL}\"><img src=\"${previewURL}\" /></a></li>`\n    )\n    .join('');\n\n  refs.list.insertAdjacentHTML('beforeend', list);\n};\n\nconst loaderOn = () => refs.loader.classList.add('visible');\n\nconst loaderOff = () => refs.loader.classList.remove('visible');\n\nconst fetchData = async () => {\n  isLoading = true;\n  loaderOn();\n\n  try {\n    const response = await fetch(\n      `https://pixabay.com/api?key=29685313-2ba6443e06a4499ef383b21bf&q=${query}&per_page=${HITS_PER_PAGE}&page=${currentPage}`\n    );\n    const data = await response.json();\n    items = [...items, data.hits];\n    totalPages = data.totalHits / HITS_PER_PAGE;\n    renderList(data.hits);\n  } catch (error) {\n    console.log(error.message);\n  }\n\n  loaderOff();\n  isLoading = false;\n};\n\nconst handleSubmit = e => {\n  e.preventDefault();\n\n  if (query === e.target.elements.query.value) return;\n\n  query = e.target.elements.query.value;\n  refs.list.innerHTML = '';\n  currentPage = DEFAULT_CURRENT_PAGE;\n  items = [];\n\n  if (!query) return;\n\n  fetchData();\n};\n\nconst handleLoadMoreClick = () => {\n  currentPage += 1;\n  fetchData();\n};\n\nconst handleWindowScroll = ({ target }) => {\n  if (\n    target.scrollTop + target.clientHeight + 10 >= target.scrollHeight &&\n    !isLoading\n  ) {\n    handleLoadMoreClick();\n  }\n};\n\nrefs.form.addEventListener('submit', handleSubmit);\nrefs.list.addEventListener('scroll', handleWindowScroll);\n"],"names":["$bpxeT","parcelRequire","$parcel$interopDefault","defaults","baseURL","$52a81643f17114e6$var$refs","form","document","querySelector","list","loader","pages","loadMore","$52a81643f17114e6$var$isLoading","$52a81643f17114e6$var$items","$52a81643f17114e6$var$query","$52a81643f17114e6$var$currentPage","$52a81643f17114e6$var$fetchData","$2TvXO","mark","_callee","response","data","classList","add","fetch","concat","_ctx","sent","json","$8nrFW","hits","totalPages","totalHits","items1","map","param","previewURL","pageURL","join","insertAdjacentHTML","console","log","t0","message","remove","addEventListener","e","preventDefault","target","elements","query","value","innerHTML","scrollTop","clientHeight","scrollHeight"],"version":3,"file":"index.11402843.js.map"}