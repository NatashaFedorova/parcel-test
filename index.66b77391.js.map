{"mappings":"qhBAIAA,E,YAAMC,SAASC,QACb,iEAEF,MAAMC,EAAO,CACXC,KAAMC,SAASC,cAAc,SAC7BC,KAAMF,SAASC,cAAc,SAC7BE,OAAQH,SAASC,cAAc,WAC/BG,MAAOJ,SAASC,cAAc,UAC9BI,SAAUL,SAASC,cAAc,eAMnC,IAAIK,GAAY,EACZC,EAAQ,GACRC,EAAQ,GACRC,EANyB,EAQ7B,MAeMC,EAAYC,UAChBL,GAAY,EALSR,EAAKK,OAAOS,UAAUC,IAAI,WAQ/C,IACE,MAAMC,QAAiBC,MACrB,oEAAoEP,qBAAwCC,KAExGO,QAAaF,EAASG,OAC5BV,EAAQ,IAAIA,EAAOS,EAAKE,MACxBC,WAAaH,EAAKI,UAhCA,EAOH,CAAAC,IACjB,MAAMnB,EAAOmB,EACVC,KACC,EAACC,WAAEA,EAAUC,QAAEA,KACb,gBAAgBA,gBAAsBD,mBAEzCE,KAAK,IAER3B,EAAKI,KAAKwB,mBAAmB,YAAaxB,EAAK,EAkB7CyB,CAAWX,EAAKE,K,CAChB,MAAOU,GACPC,QAAQC,IAAIF,EAAMG,Q,CAfEjC,EAAKK,OAAOS,UAAUoB,OAAO,WAmBnD1B,GAAY,CAAK,EAgCnBR,EAAKC,KAAKkC,iBAAiB,UA7BNC,IACnBA,EAAEC,iBAEE3B,IAAU0B,EAAEE,OAAOC,SAASC,MAAMC,QAEtC/B,EAAQ0B,EAAEE,OAAOC,SAASC,MAAMC,MAChCzC,EAAKI,KAAKsC,UAAY,GACtB/B,EAlD2B,EAmD3BF,EAAQ,GAEHC,GAELE,IAAW,IAkBbZ,EAAKI,KAAK+B,iBAAiB,UAVA,EAACG,OAAEA,MAE1BA,EAAOK,UAAYL,EAAOM,aAAe,IAAMN,EAAOO,eACrDrC,IAPHG,GAAe,EACfC,IAQuB","sources":["src/mod-11-vebinar-1.js"],"sourcesContent":["// &q=butterfly&image_type=photo&per_page=5\nimport './css/style.css';\nimport axios from 'axios';\n\naxios.defaults.baseURL =\n  'https://pixabay.com/api?key=29685313-2ba6443e06a4499ef383b21bf';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  list: document.querySelector('.list'),\n  loader: document.querySelector('.loader'),\n  pages: document.querySelector('.pages'),\n  loadMore: document.querySelector('.load-more'),\n};\n\nconst DEFAULT_CURRENT_PAGE = 1;\nconst HITS_PER_PAGE = 5;\n\nlet isLoading = false;\nlet items = [];\nlet query = '';\nlet currentPage = DEFAULT_CURRENT_PAGE;\n\nconst renderList = items => {\n  const list = items\n    .map(\n      ({ previewURL, pageURL }) =>\n        `<li><a href=\"${pageURL}\"><img src=\"${previewURL}\" /></a></li>`\n    )\n    .join('');\n\n  refs.list.insertAdjacentHTML('beforeend', list);\n};\n\nconst loaderOn = () => refs.loader.classList.add('visible');\n\nconst loaderOff = () => refs.loader.classList.remove('visible');\n\nconst fetchData = async () => {\n  isLoading = true;\n  loaderOn();\n\n  try {\n    const response = await fetch(\n      `https://pixabay.com/api?key=29685313-2ba6443e06a4499ef383b21bf&q=${query}&per_page=${HITS_PER_PAGE}&page=${currentPage}`\n    );\n    const data = await response.json();\n    items = [...items, data.hits];\n    totalPages = data.totalHits / HITS_PER_PAGE;\n    renderList(data.hits);\n  } catch (error) {\n    console.log(error.message);\n  }\n\n  loaderOff();\n  isLoading = false;\n};\n\nconst handleSubmit = e => {\n  e.preventDefault();\n\n  if (query === e.target.elements.query.value) return;\n\n  query = e.target.elements.query.value;\n  refs.list.innerHTML = '';\n  currentPage = DEFAULT_CURRENT_PAGE;\n  items = [];\n\n  if (!query) return;\n\n  fetchData();\n};\n\nconst handleLoadMoreClick = () => {\n  currentPage += 1;\n  fetchData();\n};\n\nconst handleWindowScroll = ({ target }) => {\n  if (\n    target.scrollTop + target.clientHeight + 10 >= target.scrollHeight &&\n    !isLoading\n  ) {\n    handleLoadMoreClick();\n  }\n};\n\nrefs.form.addEventListener('submit', handleSubmit);\nrefs.list.addEventListener('scroll', handleWindowScroll);\n"],"names":["$parcel$interopDefault","defaults","baseURL","$188d9bf567b5b6d8$var$refs","form","document","querySelector","list","loader","pages","loadMore","$188d9bf567b5b6d8$var$isLoading","$188d9bf567b5b6d8$var$items","$188d9bf567b5b6d8$var$query","$188d9bf567b5b6d8$var$currentPage","$188d9bf567b5b6d8$var$fetchData","async","classList","add","response","fetch","data","json","hits","totalPages","totalHits","items1","map","previewURL","pageURL","join","insertAdjacentHTML","$188d9bf567b5b6d8$var$renderList","error","console","log","message","remove","addEventListener","e","preventDefault","target","elements","query","value","innerHTML","scrollTop","clientHeight","scrollHeight"],"version":3,"file":"index.66b77391.js.map"}